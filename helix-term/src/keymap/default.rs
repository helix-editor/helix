use std::collections::HashMap;

use super::macros::keymap;
use super::{KeyTrie, Mode};
use helix_core::hashmap;

pub fn default() -> HashMap<Mode, KeyTrie> {
    let normal = keymap!({ "Normal mode"
        // "" => add_newline_above,
        // "" => add_newline_below,
        // "" => align_selections,
        // "" => align_view_bottom,
        // "" => align_view_center,
        // "" => align_view_middle,
        // "" => align_view_top,
        // "" => append_mode,
        // "" => buffer_picker,
        // "" => change_selection,
        // "" => change_selection_noyank,
        // "" => code_action,
        // "" => collapse_selection,
        ":" => command_mode,
        // "" => command_palette,
        // "" => commit_undo_checkpoint,
        // "" => completion,
        // "" => copy_selection_on_next_line,
        // "" => copy_selection_on_prev_line,
        // "" => dap_continue,
        // "" => dap_disable_exceptions,
        // "" => dap_edit_condition,
        // "" => dap_edit_log,
        // "" => dap_enable_exceptions,
        // "" => dap_launch,
        // "" => dap_next,
        // "" => dap_pause,
        // "" => dap_restart,
        // "" => dap_step_in,
        // "" => dap_step_out,
        // "" => dap_switch_stack_frame,
        // "" => dap_switch_thread,
        // "" => dap_terminate,
        // "" => dap_toggle_breakpoint,
        // "" => dap_variables,
        // "" => decrement,
        // "" => delete_char_backward,
        // "" => delete_char_forward,
        // "" => delete_selection,
        // "" => delete_selection_noyank,
        // "" => delete_word_backward,
        // "" => delete_word_forward,
        // "" => diagnostics_picker,
        // "" => earlier,
        // "" => ensure_selections_forward,
        // "" => exit_select_mode,
        // "" => expand_selection,
        // "" => extend_char_left,
        // "" => extend_char_right,
        // "" => extend_line,
        // "" => extend_line_above,
        // "" => extend_line_below,
        // "" => extend_line_down,
        // "" => extend_line_up,
        // "" => extend_next_char,
        // "" => extend_next_long_word_end,
        // "" => extend_next_long_word_start,
        // "" => extend_next_word_end,
        // "" => extend_next_word_start,
        // "" => extend_parent_node_end,
        // "" => extend_parent_node_start,
        // "" => extend_prev_char,
        // "" => extend_prev_long_word_end,
        // "" => extend_prev_long_word_start,
        // "" => extend_prev_word_end,
        // "" => extend_prev_word_start,
        // "" => extend_search_next,
        // "" => extend_search_prev,
        // "" => extend_till_char,
        // "" => extend_till_prev_char,
        // "" => extend_to_first_nonwhitespace,
        // "" => extend_to_line_bounds,
        // "" => extend_to_line_end,
        // "" => extend_to_line_end_newline,
        // "" => extend_to_line_start,
        // "" => extend_visual_line_down,
        // "" => extend_visual_line_up,
        // "" => file_picker,
        // "" => file_picker_in_current_buffer_directory,
        // "" => file_picker_in_current_directory,
        // "" => find_next_char,
        // "" => find_prev_char,
        // "" => find_till_char,
        // "" => flip_selections,
        // "" => format_selections,
        // "" => global_search,
        // "" => goto_declaration,
        // "" => goto_definition,
        // "" => goto_file,
        // "" => goto_file_end,
        // "" => goto_file_hsplit,
        // "" => goto_file_start,
        // "" => goto_file_vsplit,
        // "" => goto_first_change,
        // "" => goto_first_diag,
        // "" => goto_first_nonwhitespace,
        // "" => goto_implementation,
        // "" => goto_last_accessed_file,
        // "" => goto_last_change,
        // "" => goto_last_diag,
        // "" => goto_last_line,
        // "" => goto_last_modification,
        // "" => goto_last_modified_file,
        // "" => goto_line,
        // "" => goto_line_end,
        // "" => goto_line_end_newline,
        // "" => goto_line_start,
        // "" => goto_next_buffer,
        // "" => goto_next_change,
        // "" => goto_next_class,
        // "" => goto_next_comment,
        // "" => goto_next_diag,
        // "" => goto_next_function,
        // "" => goto_next_paragraph,
        // "" => goto_next_parameter,
        // "" => goto_next_test,
        // "" => goto_prev_change,
        // "" => goto_prev_class,
        // "" => goto_prev_comment,
        // "" => goto_prev_diag,
        // "" => goto_prev_function,
        // "" => goto_prev_paragraph,
        // "" => goto_prev_parameter,
        // "" => goto_prev_test,
        // "" => goto_previous_buffer,
        // "" => goto_reference,
        // "" => goto_type_definition,
        // "" => goto_window_bottom,
        // "" => goto_window_center,
        // "" => goto_window_top,
        // "" => half_page_down,
        // "" => half_page_up,
        // "" => hover,
        // "" => hsplit,
        // "" => hsplit_new,
        // "" => increment,
        // "" => indent,
        // "" => insert_at_line_end,
        // "" => insert_at_line_start,
        // "" => insert_mode,
        // "" => insert_newline,
        // "" => insert_register,
        // "" => insert_tab,
        // "" => join_selections,
        // "" => join_selections_space,
        // "" => jump_backward,
        // "" => jump_forward,
        // "" => jump_view_down,
        // "" => jump_view_left,
        // "" => jump_view_right,
        // "" => jump_view_up,
        // "" => jumplist_picker,
        // "" => keep_primary_selection,
        // "" => keep_selections,
        // "" => kill_to_line_end,
        // "" => kill_to_line_start,
        // "" => last_picker,
        // "" => later,
        // "" => make_search_word_bounded,
        // "" => match_brackets,
        // "" => menu_separator,
        // "" => menu_separator_clipboard,
        // "" => menu_separator_code,
        // "" => menu_separator_global,
        // "" => menu_separator_local,
        // "" => merge_consecutive_selections,
        // "" => merge_selections,
        // "" => move_char_left,
        // "" => move_char_right,
        // "" => move_line_down,
        // "" => move_line_up,
        // "" => move_next_long_word_end,
        // "" => move_next_long_word_start,
        // "" => move_next_word_end,
        // "" => move_next_word_start,
        // "" => move_parent_node_end,
        // "" => move_parent_node_start,
        // "" => move_prev_long_word_end,
        // "" => move_prev_long_word_start,
        // "" => move_prev_word_end,
        // "" => move_prev_word_start,
        // "" => move_visual_line_down,
        // "" => move_visual_line_up,
        // "" => no_op,
        // "" => normal_mode,
        // "" => open_above,
        // "" => open_below,
        // "" => page_cursor_down,
        // "" => page_cursor_half_down,
        // "" => page_cursor_half_up,
        // "" => page_cursor_up,
        // "" => page_down,
        // "" => page_up,
        // "" => paste_after,
        // "" => paste_before,
        // "" => paste_clipboard_after,
        // "" => paste_clipboard_before,
        // "" => paste_primary_clipboard_after,
        // "" => paste_primary_clipboard_before,
        // "" => record_macro,
        // "" => redo,
        // "" => remove_primary_selection,
        // "" => remove_selections,
        // "" => rename_symbol,
        // "" => repeat_last_motion,
        // "" => replace,
        // "" => replace_selections_with_clipboard,
        // "" => replace_selections_with_primary_clipboard,
        // "" => replace_with_yanked,
        // "" => replay_macro,
        // "" => reverse_selection_contents,
        // "" => rotate_selection_contents_backward,
        // "" => rotate_selection_contents_forward,
        // "" => rotate_selections_backward,
        // "" => rotate_selections_forward,
        // "" => rotate_view,
        // "" => rotate_view_reverse,
        // "" => rsearch,
        // "" => save_selection,
        // "" => scroll_down,
        // "" => scroll_up,
        // "" => search,
        // "" => search_next,
        // "" => search_prev,
        // "" => search_selection,
        // "" => select_all,
        // "" => select_mode,
        // "" => select_next_sibling,
        // "" => select_prev_sibling,
        // "" => select_references_to_symbol_under_cursor,
        // "" => select_regex,
        // "" => select_register,
        // "" => select_textobject_around,
        // "" => select_textobject_inner,
        // "" => shell_append_output,
        // "" => shell_insert_output,
        // "" => shell_keep_pipe,
        // "" => shell_pipe,
        // "" => shell_pipe_to,
        // "" => shrink_selection,
        // "" => shrink_to_line_bounds,
        // "" => signature_help,
        // "" => smart_tab,
        // "" => split_selection,
        // "" => split_selection_on_newline,
        // "" => surround_add,
        // "" => surround_delete,
        // "" => surround_replace,
        // "" => suspend,
        // "" => swap_view_down,
        // "" => swap_view_left,
        // "" => swap_view_right,
        // "" => swap_view_up,
        // "" => switch_case,
        // "" => switch_to_lowercase,
        // "" => switch_to_uppercase,
        // "" => symbol_picker,
        // "" => till_prev_char,
        // "" => toggle_block_comments,
        // "" => toggle_comments,
        // "" => toggle_line_comments,
        // "" => transpose_view,
        // "" => trim_selections,
        // "" => undo,
        // "" => unindent,
        // "" => vsplit,
        // "" => vsplit_new,
        // "" => wclose,
        // "" => wonly,
        // "" => workspace_diagnostics_picker,
        // "" => workspace_symbol_picker,
        // "" => yank,
        // "" => yank_joined,
        // "" => yank_joined_to_clipboard,
        // "" => yank_joined_to_primary_clipboard,
        // "" => yank_main_selection_to_clipboard,
        // "" => yank_main_selection_to_primary_clipboard,
        // "" => yank_to_clipboard,
        // "" => yank_to_primary_clipboard,

        // Menu (normal mode)
        "space" => { " ⭐ Space "
            "esc" => normal_mode,

            "🗿" => menu_separator_local,

            //"" => buffer_picker,
            //"" => diagnostics_picker,
            //"" => file_picker,
            //"" => jumplist_picker,
            //"" => symbol_picker,
            //"" => last_picker,

            "🌐" => menu_separator_global,

            //"" => file_picker_in_current_directory,
            //"" => workspace_symbol_picker,
            //"" => workspace_diagnostics_picker,
            //"" => global_search,
            //"" => command_palette,

            "⌨" => menu_separator_code,

            //"" => code_action,
            //"" => hover,
            //"" => rename_symbol,
            //"" => select_references_to_symbol_under_cursor,
            //"" => add_newline_above,
            //"" => add_newline_below,

            "📋" => menu_separator_clipboard,

            // Submenu (normal mode)
            "y" => { "📤 Yank  " sticky=true
                "esc" => normal_mode,
                //"" => yank,
                //"" => yank_joined,
                //"" => paste_before,
                //"" => paste_after,
                //"" => replace_with_yanked,
            },

            // Submenu (normal mode)
            "c" => { "📋 Copy  " sticky=true
                "esc" => normal_mode,
                //"" => yank_to_clipboard,
                //"" => yank_joined_to_clipboard,
                //"" => yank_main_selection_to_clipboard,
                //"" => paste_clipboard_before,
                //"" => paste_clipboard_after,
                //"" => replace_selections_with_clipboard,
            },

            // Submenu (normal mode)
            "e" => { "💻 Export  " sticky=true
                "esc" => normal_mode,
                //"" => yank_to_primary_clipboard,
                //"" => yank_joined_to_primary_clipboard,
                //"" => yank_main_selection_to_primary_clipboard,
                //"" => paste_primary_clipboard_before,
                //"" => paste_primary_clipboard_after,
                //"" => replace_selections_with_primary_clipboard,
            },

            "‒" => menu_separator,

            // Submenu (normal mode)
            "g" => { "🐞 Debug  " sticky=true
                "esc" => normal_mode,
                //"" => dap_launch,
                //"" => dap_restart,
                //"" => dap_toggle_breakpoint,
                //"" => dap_continue,
                //"" => dap_pause,
                //"" => dap_step_in,
                //"" => dap_step_out,
                //"" => dap_next,
                //"" => dap_variables,
                //"" => dap_terminate,
                //"" => dap_edit_condition,
                //"" => dap_edit_log,
                //"" => { " Switch  "
                //    "" => dap_switch_thread,
                //    "" => dap_switch_stack_frame,
                //},
                //"" => dap_enable_exceptions,
                //"" => dap_disable_exceptions,
            },

            // Submenu (normal mode)
            "v" => { "🧿 View  "
                "esc" => normal_mode,
                //"" => align_view_center,
                //"" => align_view_top,
                //"" => align_view_bottom,
                //"" => align_view_middle,
                //"" => scroll_up,
                //"" => scroll_down,
                //"" => page_up,
                //"" => page_down,
                //"" => page_cursor_half_up,
                //"" => page_cursor_half_down,
                //"" => search,
                //"" => rsearch,
                //"" => search_next,
                //"" => search_prev,
            },

            // Submenu (normal mode)
            "w" => { "🪟 Window  "
                "esc" => normal_mode,
                //"" => rotate_view,
                //"" => hsplit,
                //"" => vsplit,
                //"" => transpose_view,
                //"" => goto_file_hsplit,
                //"" => goto_file_vsplit,
                //"" => wclose,
                //"" => wonly,
                //"" => jump_view_left,
                //"" => jump_view_down,
                //"" => jump_view_up,
                //"" => jump_view_right,
                //"" => swap_view_left,
                //"" => swap_view_down,
                //"" => swap_view_up,
                //"" => swap_view_right,
                //"" => { "New split scratch buffer"
                //    "" => hsplit_new,
                //    "" => vsplit_new,
                //},
            },
        },

        // Menu (normal mode)
        "g" => { " 🚀 Goto "
            "esc" => normal_mode,
            //"" => goto_first_nonwhitespace,
            //"" => goto_definition,
            //"" => goto_declaration,
            //"" => goto_type_definition,
            //"" => goto_reference,
            //"" => goto_implementation,
            //"" => goto_window_top,
            //"" => goto_window_center,
            //"" => goto_window_bottom,
            //"" => goto_last_accessed_file,
            //"" => goto_last_modified_file,
            //"" => goto_last_modification,
        },

        // Menu (normal mode)
        "m" => { " 󰾹 Match "
            "esc" => normal_mode,
            //"" => match_brackets,
            //"" => surround_add,
            //"" => surround_replace,
            //"" => surround_delete,
            //"" => select_textobject_around,
            //"" => select_textobject_inner,
        },

        // Menu (normal mode)
        "[" => { " ⮬ Goto "
            "esc" => normal_mode,
            //"" => goto_first_diag,
            //"" => goto_first_change,
            //"" => goto_prev_diag,
            //"" => goto_prev_change,
            //"" => goto_prev_function,
            //"" => goto_prev_class,
            //"" => goto_prev_parameter,
            //"" => goto_prev_comment,
            //"" => goto_prev_test,
            //"" => goto_prev_paragraph,
        },

        // Menu (normal mode)
        "]" => { " Goto ⮯ "
            "esc" => normal_mode,
            //"" => goto_next_diag,
            //"" => goto_next_change,
            //"" => goto_next_function,
            //"" => goto_next_class,
            //"" => goto_next_parameter,
            //"" => goto_next_comment,
            //"" => goto_next_test,
            //"" => goto_next_paragraph,
            //"" => goto_last_diag,
            //"" => goto_last_change,
        },
    });

    let mut select = normal.clone();
    select.merge_nodes(keymap!({ "Select mode"
        "esc" => exit_select_mode,
        // copy non-detected normal mode commands here

        // Menu (select mode)
        "g" => { "Goto"
            "esc" => exit_select_mode,
            //"" => extend_line_up,
            //"" => extend_line_down,
        },
    }));

    let insert = keymap!({ "Insert mode"
        "esc" => normal_mode,
        // copy non-detected normal mode commands here
    });
    hashmap!(
        Mode::Normal => normal,
        Mode::Select => select,
        Mode::Insert => insert,
    )
}
